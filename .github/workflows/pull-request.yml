# name: pr
# on:
#   push:
#     branches-ignore:
#       - master
# jobs:
#   auto-pull-request:
#     name: auto pr
#     runs-on: ubuntu-latest
#     steps:
#       - name: pull-request-action
#         uses: vsoch/pull-request-action@master
#         env:
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#           BRANCH_PREFIX: ""
#           PULL_REQUEST_BRANCH: "master"
#           PULL_REQUEST_TITLE: "Auto PR for ${github_branch_ref##*/}"
#           PULL_REQUEST_BODY: "This is an autogenerated PR as a result from a commit pushed from this branch: ${github_branch_ref##*/}"
          
#       - name: run ci
#           run: | 
#           sonar_host_url="https://sonarcloud.io"
#           sonar_organization_name=${github_repository_key%%/*} # retain the part before the last slash 
#           sonar_project_name=${github_repository_key##*/}  # retain the part after the last slash 
#           github_branch_ref="${{ github.ref }}"
#           github_branch_name=${github_branch_ref##*/}  # retain the part after the last slash 
#           github_repository_key="${{ github.repository }}"
#           github_pullrequest_number=$(jq --raw-output .pull_request.number "$GITHUB_EVENT_PATH")
#           github_event_action=$(jq -r ".action" "$GITHUB_EVENT_PATH")
#           ./scripts/ci.sh -u "$sonar_host_url" -t "${{ secrets.SONAR_TOKEN }}" -o "$sonar_organization_name" -k "$sonar_project_key" -n "$sonar_project_name" -g "$github_repository_key" -r "$github_branch_ref" -b "$github_branch_name" -p "$github_pullrequest_number" -e "$github_event_action"
#           env:
#             GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#             SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}